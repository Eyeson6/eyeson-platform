<template menuId="210" version="2"><!--模板跟节点 -->

    <!-- 在页面上显示页面的所在位置 -->
    <directions>
        <direct name="基础数据"/>
        <direct name="药品管理"/>
    </directions>

    <!-- 将模块所有sql语句统一配置，供各个操作使用，其中包含多个sql配置 -->
    <sqls sql="true">
        <sql id="listsql" method="select">
            SELECT
            id,
            `code`,
            NAME,
            standard_library_id,
            generic_name,
            specification,
            place,
            manufacturer,
            preparation_id,
            (
            SELECT
            NAME
            FROM
            SAAS_TEST.saas_dictionary dd
            WHERE
            dd.`category` = "preparation_id"
            AND dd.`value` = preparation_id
            ) AS preparation_name,
            unit_id,
            (
            SELECT
            NAME
            FROM
            SAAS_TEST.saas_dictionary dd
            WHERE
            dd.`category` = "unit_id"
            AND dd.`value` = unit_id
            ) AS unit_name,
            toxicology,
            domestic_import,
            registration_code,
            registration_code_expire_date,
            barcode,
            operating_license,
            enterprise_gmp_code,
            enterprise_gmp_expire_date,
            drug_licence,
            factory_report,
            valid_months,
            registered_trademark,
            certificated,
            purchase_tax_rate,
            sell_tax_rate,
            goods_type,
            category_id,
            (
            SELECT
            NAME
            FROM
            SAAS_TEST.saas_dictionary dd
            WHERE
            dd.`category` = "category_id"
            AND dd.`value` = category_id
            ) AS category_name,

            gsp_category_id,
            retail_price,
            member_price,
            mcountry_price,
            integral_good,
            special_price,
            safe_inventory,
            integral_multiple,
            scatter_unit_id,
            scattter_quantity,
            scatter_specification,
            scattered,
            case when scattered='0' then 'false' else 'true' end as show_scattered,
            curing,
            prescription_drug,
            ephedrine,
            medical_insurance,
            medical_insurance_code,
            GMP,
            GMP_code,
            storage_condition,
            FIRST,
            (
            SELECT
            NAME
            FROM
            SAAS_TEST.saas_dictionary dd
            WHERE
            dd.`category` = "has_seal"
            AND
            dd.`value` = FIRST
            )
            AS FIRST_name,
            quality_manager_approver_id,
            quality_manager_approver_name,
            quality_manager_approval_status,
            quality_manager_approval_time,
            quality_manager_approval_reason,
            quality_approver_id,
            quality_approver_name,
            quality_approval_time,
            quality_approval_reason,
            creater_id,
            creater_name,
            modifier_id,
            modifier_name,
            sale_status,
            CASE
            sale_status
            WHEN '0' THEN
            '停用'
            WHEN '1' THEN
            '启用'
            END AS sale_status_name,

            enable_user_id,
            enable_user_name,
            disable_user_id,
            disable_user_name,
            department,
            enable_reason,
            disable_reason,
            enable_time,
            disable_time,
            create_time,
            update_time,
            remarks,
            attachment,
            storage_id,
            (
            SELECT
            name
            FROM
            SAAS_TEST.saas_storage ss
            where id != -1
            AND ss.id = storage_id
            ) AS storage_id_name
            FROM
            SAAS_TEST.saas_goods
            where 1=1 and NOT INSTR(RIGHT(CODE,3),'_01')>0
            <if method="isNoEmpty" args="${startTime}"> <![CDATA[and create_time >= ${startTime}]]>
            </if>
            <if method="isNoEmpty" args="${endTime}"> <![CDATA[ and create_time <= ${endTime}]]>
            </if>
            <if method="isNoEmpty" args="${name}"> <![CDATA[ and name like %${name}%]]>
            </if>
            <if method="isNoEmpty" args="${code}"> <![CDATA[ and code like %${code}%]]>
            </if>
            <if method="isNoEmpty" args="${registration_code}">
                <![CDATA[ and registration_code like %${registration_code}%]]>
            </if>
            <if method="isNoEmpty" args="${pinyin_code}"> <![CDATA[ and pinyin_code like %${pinyin_code}%]]>
            </if>
            <if method="isNoEmpty" args="${creater_name}"> <![CDATA[ and creater_name like %${creater_name}%]]>
            </if>
            <!-- <if method="isNoEmpty" args="${gsp_category_id}"> <![CDATA[ and gsp_category_id like %${gsp_category_id}%]]> </if> -->
            <if method="isNoEmpty" args="${sale_status}"> <![CDATA[ and sale_status like %${sale_status}%]]>
            </if>
            order by create_time desc
        </sql>

        <sql id="querySql" method="query">
            SELECT
            id,
            `code`,
            standard_library_id,
            pinyin_code,
            NAME,
            generic_name,
            specification,
            place,
            manufacturer,
            preparation_id,
            (
            SELECT
            NAME
            FROM
            SAAS_TEST.saas_dictionary dd
            WHERE
            dd.`category` = "preparation_id"
            AND dd.`value` = preparation_id
            ) AS preparation_name,
            unit_id,
            (
            SELECT
            NAME
            FROM
            SAAS_TEST.saas_dictionary dd
            WHERE
            dd.`category` = "unit_id"
            AND dd.`value` = unit_id
            ) AS unit_name,
            toxicology,
            domestic_import,
            registration_code,
            registration_code_expire_date,
            barcode,
            operating_license,
            enterprise_gmp_code,
            enterprise_gmp_expire_date,
            drug_licence,
            factory_report,
            valid_months,
            registered_trademark,
            certificated,
            purchase_tax_rate,
            sell_tax_rate,
            goods_type,
            (
            SELECT
            NAME
            FROM
            SAAS_TEST.saas_dictionary dd
            WHERE
            dd.`category` = "goods_type"
            AND dd.`value` = goods_type
            ) AS goods_type_name,
            category_id,
            (
            SELECT
            NAME
            FROM
            SAAS_TEST.saas_dictionary dd
            WHERE
            dd.`category` = "category_id"
            AND dd.`value` = category_id
            ) AS category_name,
            gsp_category_id,
            retail_price,
            member_price,
            mcountry_price,
            integral_good,
            special_price,
            safe_inventory,
            integral_multiple,
            scatter_unit_id,
            (
            SELECT
            NAME
            FROM
            SAAS_TEST.saas_dictionary dd
            WHERE
            dd.`category` = "unit_id"
            AND dd.`value` = scatter_unit_id
            ) AS scatter_unit_name,
            scattter_quantity,
            scatter_specification,
            scattered,
            curing,
            prescription_drug,
            ephedrine,
            medical_insurance,
            medical_insurance_code,
            GMP,
            GMP_code,
            storage_condition,
            FIRST,
            (
            SELECT
            NAME
            FROM
            SAAS_TEST.saas_dictionary dd
            WHERE
            dd.`category` = "has_seal"
            AND
            dd.`value` = FIRST
            )
            AS FIRST_name,
            quality_manager_approver_id,
            quality_manager_approver_name,
            quality_manager_approval_status,
            quality_manager_approval_time,
            quality_manager_approval_reason,
            quality_approver_id,
            quality_approver_name,
            quality_approval_time,
            quality_approval_reason,
            creater_id,
            creater_name,
            modifier_id,
            modifier_name,
            sale_status,
            CASE
            sale_status
            WHEN '0' THEN
            '停用'
            WHEN '1' THEN
            '启用'
            END AS sale_status_name,

            enable_user_id,
            enable_user_name,
            disable_user_id,
            disable_user_name,
            department,
            enable_reason,
            disable_reason,
            enable_time,
            disable_time,
            create_time,
            update_time,
            remarks,
            attachment,
            storage_id,
            (
            SELECT
            name
            FROM
            SAAS_TEST.saas_storage ss
            where id != -1
            AND ss.id = storage_id
            ) AS storage_id_name
            FROM
            SAAS_TEST.saas_goods
            where id=${key}
        </sql>

        <sql id="ckSql" method="query">
            SELECT
            id,
            safe_inventory,
            `code`,
            NAME,
            standard_library_id,
            pinyin_code,
            generic_name,
            specification,
            place,
            manufacturer,
            preparation_id,
            (
            SELECT
            NAME
            FROM
            SAAS_TEST.saas_dictionary dd
            WHERE
            dd.`category` = "preparation_id"
            AND dd.`value` = preparation_id
            ) AS preparation_name,
            unit_id,
            (
            SELECT
            NAME
            FROM
            SAAS_TEST.saas_dictionary dd
            WHERE
            dd.`category` = "unit_id"
            AND dd.`value` = unit_id
            ) AS unit_name,
            toxicology,
            CASE toxicology
            WHEN '0' THEN
            '无毒'
            WHEN '1' THEN
            '有毒'
            END AS toxicology_name,
            domestic_import,
            CASE
            domestic_import
            WHEN
            '0' THEN
            '国产'
            WHEN '1'
            THEN
            '进口'
            END AS domestic_import_name,
            registration_code,
            registration_code_expire_date,
            barcode,
            operating_license,
            enterprise_gmp_code,
            enterprise_gmp_expire_date,
            drug_licence,
            factory_report,
            valid_months,
            registered_trademark,
            certificated,
            purchase_tax_rate,
            sell_tax_rate,
            goods_type,
            (
            SELECT
            NAME
            FROM
            SAAS_TEST.saas_dictionary dd
            WHERE
            dd.`category` = "goods_type"
            AND dd.`value` = goods_type
            ) AS goods_type_name,
            category_id,
            (
            SELECT
            NAME
            FROM
            SAAS_TEST.saas_dictionary dd
            WHERE
            dd.`category` = "category_id"
            AND dd.`value` = category_id
            ) AS category_name,
            retail_price,
            member_price,
            mcountry_price,
            integral_good,
            (
            SELECT
            NAME
            FROM
            SAAS_TEST.saas_dictionary dd
            WHERE
            dd.`category` = "has_seal"
            AND dd.`value` = integral_good
            ) AS integral_good_name,
            special_price,
            (
            SELECT
            NAME
            FROM
            SAAS_TEST.saas_dictionary dd
            WHERE
            dd.`category` = "has_seal"
            AND dd.`value` = special_price
            ) AS special_price_name,
            integral_multiple,
            scatter_unit_id,
            (
            SELECT
            NAME
            FROM
            SAAS_TEST.saas_dictionary dd
            WHERE
            dd.`category` = "unit_id"
            AND dd.`value` = scatter_unit_id
            ) AS scatter_unit_name,
            scattter_quantity,
            scatter_specification,
            scattered,
            (
            SELECT
            NAME
            FROM
            SAAS_TEST.saas_dictionary dd
            WHERE
            dd.`category` = "has_seal"
            AND dd.`value`
            = scattered
            ) AS
            scattered_name,
            curing,
            (
            SELECT
            NAME
            FROM
            SAAS_TEST.saas_dictionary dd
            WHERE
            dd.`category` =
            "has_seal"
            AND dd.`value` = curing
            ) AS curing_name,
            prescription_drug,
            (
            SELECT
            NAME
            FROM
            SAAS_TEST.saas_dictionary dd
            WHERE
            dd.`category` = "has_seal"
            AND dd.`value` = prescription_drug
            ) AS prescription_drug_name,
            ephedrine,
            (
            SELECT
            NAME
            FROM
            SAAS_TEST.saas_dictionary dd
            WHERE
            dd.`category` = "has_seal"
            AND dd.`value` = ephedrine
            ) AS ephedrine_name,
            medical_insurance,
            (
            SELECT
            NAME
            FROM
            SAAS_TEST.saas_dictionary dd
            WHERE
            dd.`category` = "has_seal"
            AND
            dd.`value` = medical_insurance
            ) AS medical_insurance_name,
            medical_insurance_code,
            GMP,
            (
            SELECT
            NAME
            FROM
            SAAS_TEST.saas_dictionary dd
            WHERE
            dd.`category` = "has_seal"
            AND dd.`value` = GMP
            ) AS GMP_name,
            GMP_code,
            storage_condition,
            CASE storage_condition
            WHEN '0' THEN
            '常温'
            WHEN '1' THEN
            '阴凉'
            WHEN '2' THEN
            '冷藏'
            END AS storage_condition_name,
            FIRST,
            (
            SELECT
            NAME
            FROM
            SAAS_TEST.saas_dictionary dd
            WHERE
            dd.`category` = "has_seal"
            AND dd.`value` = FIRST
            ) AS FIRST_name,
            sale_status,
            CASE
            sale_status
            WHEN '0' THEN
            '停用'
            WHEN '1'
            THEN
            '启用'
            END AS sale_status_name,
            remarks,
            storage_id,
            (
            SELECT
            name
            FROM
            SAAS_TEST.saas_storage ss
            where id != -1
            AND ss.id = storage_id
            ) AS storage_id_name
            FROM
            SAAS_TEST.saas_goods
            where id=${key}
        </sql>

        <sql id="ckclSql" method="query">
            SELECT
            id,
            safe_inventory,
            `code`,
            NAME,
            standard_library_id,
            pinyin_code,
            generic_name,
            specification,
            place,
            manufacturer,
            preparation_id,
            (
            SELECT
            NAME
            FROM
            SAAS_TEST.saas_dictionary dd
            WHERE
            dd.`category` = "preparation_id"
            AND dd.`value` = preparation_id
            ) AS preparation_name,
            unit_id,
            (
            SELECT
            NAME
            FROM
            SAAS_TEST.saas_dictionary dd
            WHERE
            dd.`category` = "unit_id"
            AND dd.`value` = unit_id
            ) AS unit_name,
            toxicology,
            CASE toxicology
            WHEN '0' THEN
            '无毒'
            WHEN '1' THEN
            '有毒'
            END AS toxicology_name,
            domestic_import,
            CASE
            domestic_import
            WHEN
            '0' THEN
            '国产'
            WHEN '1'
            THEN
            '进口'
            END AS domestic_import_name,
            registration_code,
            registration_code_expire_date,
            barcode,
            operating_license,
            enterprise_gmp_code,
            enterprise_gmp_expire_date,
            drug_licence,
            factory_report,
            valid_months,
            registered_trademark,
            certificated,
            purchase_tax_rate,
            sell_tax_rate,
            goods_type,
            (
            SELECT
            NAME
            FROM
            SAAS_TEST.saas_dictionary dd
            WHERE
            dd.`category` = "goods_type"
            AND dd.`value` = goods_type
            ) AS goods_type_name,
            category_id,
            (
            SELECT
            NAME
            FROM
            SAAS_TEST.saas_dictionary dd
            WHERE
            dd.`category` = "category_id"
            AND dd.`value` = category_id
            ) AS category_name,
            gsp_category_id,
            retail_price,
            member_price,
            mcountry_price,
            integral_good,
            (
            SELECT
            NAME
            FROM
            SAAS_TEST.saas_dictionary dd
            WHERE
            dd.`category` = "has_seal"
            AND dd.`value` = integral_good
            ) AS integral_good_name,
            special_price,
            (
            SELECT
            NAME
            FROM
            SAAS_TEST.saas_dictionary dd
            WHERE
            dd.`category` = "has_seal"
            AND dd.`value` = special_price
            ) AS special_price_name,
            integral_multiple,
            scatter_unit_id,
            (
            SELECT
            NAME
            FROM
            SAAS_TEST.saas_dictionary dd
            WHERE
            dd.`category` = "unit_id"
            AND dd.`value` = scatter_unit_id
            ) AS scatter_unit_name,
            scattter_quantity,
            scatter_specification,
            scattered,
            (
            SELECT
            NAME
            FROM
            SAAS_TEST.saas_dictionary dd
            WHERE
            dd.`category` = "has_seal"
            AND dd.`value`
            = scattered
            ) AS
            scattered_name,
            curing,
            (
            SELECT
            NAME
            FROM
            SAAS_TEST.saas_dictionary dd
            WHERE
            dd.`category` =
            "has_seal"
            AND dd.`value` = curing
            ) AS curing_name,
            prescription_drug,
            (
            SELECT
            NAME
            FROM
            SAAS_TEST.saas_dictionary dd
            WHERE
            dd.`category` = "has_seal"
            AND dd.`value` = prescription_drug
            ) AS prescription_drug_name,
            ephedrine,
            (
            SELECT
            NAME
            FROM
            SAAS_TEST.saas_dictionary dd
            WHERE
            dd.`category` = "has_seal"
            AND dd.`value` = ephedrine
            ) AS ephedrine_name,
            medical_insurance,
            (
            SELECT
            NAME
            FROM
            SAAS_TEST.saas_dictionary dd
            WHERE
            dd.`category` = "has_seal"
            AND
            dd.`value` = medical_insurance
            ) AS medical_insurance_name,
            medical_insurance_code,
            GMP,
            (
            SELECT
            NAME
            FROM
            SAAS_TEST.saas_dictionary dd
            WHERE
            dd.`category` = "has_seal"
            AND dd.`value` = GMP
            ) AS GMP_name,
            GMP_code,
            storage_condition,
            CASE storage_condition
            WHEN '0' THEN
            '常温'
            WHEN '1' THEN
            '阴凉'
            WHEN '2' THEN
            '冷藏'
            END AS storage_condition_name,
            FIRST,
            (
            SELECT
            NAME
            FROM
            SAAS_TEST.saas_dictionary dd
            WHERE
            dd.`category` = "has_seal"
            AND dd.`value` = FIRST
            ) AS FIRST_name,
            sale_status,
            CASE
            sale_status
            WHEN '0' THEN
            '停用'
            WHEN '1'
            THEN
            '启用'
            END AS sale_status_name,
            remarks,
            storage_id,
            (
            SELECT
            name
            FROM
            SAAS_TEST.saas_storage ss
            where id != -1
            AND ss.id = storage_id
            ) AS storage_id_name
            FROM
            SAAS_TEST.saas_goods
            where code=CONCAT(${code},'_01')
        </sql>

        <sql id="checkSql" method="query">
            SELECT
            CASE
            WHEN '1' = scattered THEN
            'true'
            ELSE
            'false'
            END AS mustBreak
            FROM
            SAAS_TEST.saas_goods
            WHERE
            code = ${key}
        </sql>

        <sql id="checkSSql" method="query">
            SELECT
            CASE
            WHEN '0' = sale_status THEN
            'false'
            ELSE
            'true'
            END AS mustBreak
            FROM
            SAAS_TEST.saas_goods
            WHERE
            id = ${key}
        </sql>

        <sql id="checkSSSql" method="query">
            SELECT
            CASE
            WHEN '0' = sale_status THEN
            'true'
            ELSE
            'false'
            END AS mustBreak
            FROM
            SAAS_TEST.saas_goods
            WHERE
            id = ${key}
        </sql>

        <!-- 插入SQL语句 -->
        <sql id="insertSql" method="insert">
            insert into SAAS_TEST.saas_goods(

            <if method="isNoEmpty" args="${safe_inventory}">
                safe_inventory,
            </if>
            <if method="isNoEmpty" args="${code}">
                code,
            </if>
            <if method="isNoEmpty" args="${standard_library_id}">
                standard_library_id,
            </if>
            <if method="isNoEmpty" args="${name}">
                name,
            </if>
            <if method="isNoEmpty" args="${pinyin_code}">
                pinyin_code,
            </if>
            <if method="isNoEmpty" args="${generic_name}">
                generic_name,
            </if>
            <if method="isNoEmpty" args="${specification}">
                specification,
            </if>
            <if method="isNoEmpty" args="${place}">
                place,
            </if>
            <if method="isNoEmpty" args="${manufacturer}">
                manufacturer,
            </if>
            <if method="isNoEmpty" args="${preparation_id}">
                preparation_id,
            </if>
            <if method="isNoEmpty" args="${unit_id}">
                unit_id,
            </if>
            <if method="isNoEmpty" args="${toxicology}">
                toxicology,
            </if>
            <if method="isNoEmpty" args="${domestic_import}">
                domestic_import,
            </if>
            <if method="isNoEmpty" args="${registration_code}">
                registration_code,
            </if>
            <if method="isNoEmpty" args="${registration_code_expire_date}">
                registration_code_expire_date,
            </if>
            <if method="isNoEmpty" args="${barcode}">
                barcode,
            </if>
            <if method="isNoEmpty" args="${operating_license}">
                operating_license,
            </if>
            <if method="isNoEmpty" args="${enterprise_gmp_code}">
                enterprise_gmp_code,
            </if>
            <if method="isNoEmpty" args="${enterprise_gmp_expire_date}">
                enterprise_gmp_expire_date,
            </if>
            <if method="isNoEmpty" args="${drug_licence}">
                drug_licence,
            </if>
            <if method="isNoEmpty" args="${factory_report}">
                factory_report,
            </if>
            <if method="isNoEmpty" args="${valid_months}">
                valid_months,
            </if>
            <if method="isNoEmpty" args="${registered_trademark}">
                registered_trademark,
            </if>
            <if method="isNoEmpty" args="${certificated}">
                certificated,
            </if>
            <if method="isNoEmpty" args="${purchase_tax_rate}">
                purchase_tax_rate,
            </if>
            <if method="isNoEmpty" args="${sell_tax_rate}">
                sell_tax_rate,
            </if>
            <if method="isNoEmpty" args="${goods_type}">
                goods_type,
            </if>
            <if method="isNoEmpty" args="${category_id}">
                category_id,
            </if>
            <if method="isNoEmpty" args="${gsp_category_id}">
                gsp_category_id,
            </if>
            <if method="isNoEmpty" args="${retail_price}">
                retail_price,
            </if>
            <if method="isNoEmpty" args="${member_price}">
                member_price,
            </if>
            <if method="isNoEmpty" args="${mcountry_price}">
                mcountry_price,
            </if>
            <if method="isNoEmpty" args="${integral_good}">
                integral_good,
            </if>
            <if method="isNoEmpty" args="${special_price}">
                special_price,
            </if>
            <if method="isNoEmpty" args="${integral_multiple}">
                integral_multiple,
            </if>
            <if method="isNoEmpty" args="${scatter_unit_id}">
                scatter_unit_id,
            </if>
            <if method="isNoEmpty" args="${scattter_quantity}">
                scattter_quantity,
            </if>
            <if method="isNoEmpty" args="${scatter_specification}">
                scatter_specification,
            </if>
            <if method="isNoEmpty" args="${scattered}">
                scattered,
            </if>
            <if method="isNoEmpty" args="${curing}">
                curing,
            </if>
            <if method="isNoEmpty" args="${prescription_drug}">
                prescription_drug,
            </if>
            <if method="isNoEmpty" args="${ephedrine}">
                ephedrine,
            </if>
            <if method="isNoEmpty" args="${medical_insurance}">
                medical_insurance,
            </if>
            <if method="isNoEmpty" args="${medical_insurance_code}">
                medical_insurance_code,
            </if>
            <if method="isNoEmpty" args="${GMP}">
                GMP,
            </if>
            <if method="isNoEmpty" args="${GMP_code}">
                GMP_code,
            </if>
            <if method="isNoEmpty" args="${storage_condition}">
                storage_condition,
            </if>
            <if method="isNoEmpty" args="${first}">
                first,
            </if>
            <if method="isNoEmpty" args="${sale_status}">
                sale_status,
            </if>
            <if method="isNoEmpty" args="${remarks}">
                remarks,
            </if>
            <if method="isNoEmpty" args="${storage_id}">
                storage_id,
            </if>
            create_time,
            update_time,
            ) values(

            <if method="isNoEmpty" args="${safe_inventory}">
                ${safe_inventory},
            </if>
            <if method="isNoEmpty" args="${code}">
                ${code},
            </if>
            <if method="isNoEmpty" args="${standard_library_id}">
                ${standard_library_id},
            </if>
            <if method="isNoEmpty" args="${name}">
                ${name},
            </if>
            <if method="isNoEmpty" args="${pinyin_code}">
                ${pinyin_code},
            </if>
            <if method="isNoEmpty" args="${generic_name}">
                ${generic_name},
            </if>
            <if method="isNoEmpty" args="${specification}">
                ${specification},
            </if>
            <if method="isNoEmpty" args="${place}">
                ${place},
            </if>
            <if method="isNoEmpty" args="${manufacturer}">
                ${manufacturer},
            </if>
            <if method="isNoEmpty" args="${preparation_id}">
                ${preparation_id},
            </if>
            <if method="isNoEmpty" args="${unit_id}">
                ${unit_id},
            </if>
            <if method="isNoEmpty" args="${toxicology}">
                ${toxicology},
            </if>
            <if method="isNoEmpty" args="${domestic_import}">
                ${domestic_import},
            </if>
            <if method="isNoEmpty" args="${registration_code}">
                ${registration_code},
            </if>
            <if method="isNoEmpty" args="${registration_code_expire_date}">
                ${registration_code_expire_date},
            </if>
            <if method="isNoEmpty" args="${barcode}">
                ${barcode},
            </if>
            <if method="isNoEmpty" args="${operating_license}">
                ${operating_license},
            </if>
            <if method="isNoEmpty" args="${enterprise_gmp_code}">
                ${enterprise_gmp_code},
            </if>
            <if method="isNoEmpty" args="${enterprise_gmp_expire_date}">
                ${enterprise_gmp_expire_date},
            </if>
            <if method="isNoEmpty" args="${drug_licence}">
                ${drug_licence},
            </if>
            <if method="isNoEmpty" args="${factory_report}">
                ${factory_report},
            </if>
            <if method="isNoEmpty" args="${valid_months}">
                ${valid_months},
            </if>
            <if method="isNoEmpty" args="${registered_trademark}">
                ${registered_trademark},
            </if>
            <if method="isNoEmpty" args="${certificated}">
                ${certificated},
            </if>
            <if method="isNoEmpty" args="${purchase_tax_rate}">
                ${purchase_tax_rate},
            </if>
            <if method="isNoEmpty" args="${sell_tax_rate}">
                ${sell_tax_rate},
            </if>
            <if method="isNoEmpty" args="${goods_type}">
                ${goods_type},
            </if>
            <if method="isNoEmpty" args="${category_id}">
                ${category_id},
            </if>
            <if method="isNoEmpty" args="${gsp_category_id}">
                ${gsp_category_id},
            </if>
            <if method="isNoEmpty" args="${retail_price}">
                ${retail_price},
            </if>
            <if method="isNoEmpty" args="${member_price}">
                ${member_price},
            </if>
            <if method="isNoEmpty" args="${mcountry_price}">
                ${mcountry_price},
            </if>
            <if method="isNoEmpty" args="${integral_good}">
                ${integral_good},
            </if>
            <if method="isNoEmpty" args="${special_price}">
                ${special_price},
            </if>
            <if method="isNoEmpty" args="${integral_multiple}">
                ${integral_multiple},
            </if>
            <if method="isNoEmpty" args="${scatter_unit_id}">
                ${scatter_unit_id},
            </if>
            <if method="isNoEmpty" args="${scattter_quantity}">
                ${scattter_quantity},
            </if>
            <if method="isNoEmpty" args="${scatter_specification}">
                ${scatter_specification},
            </if>
            <if method="isNoEmpty" args="${scattered}">
                ${scattered},
            </if>
            <if method="isNoEmpty" args="${curing}">
                ${curing},
            </if>
            <if method="isNoEmpty" args="${prescription_drug}">
                ${prescription_drug},
            </if>
            <if method="isNoEmpty" args="${ephedrine}">
                ${ephedrine},
            </if>
            <if method="isNoEmpty" args="${medical_insurance}">
                ${medical_insurance},
            </if>
            <if method="isNoEmpty" args="${medical_insurance_code}">
                ${medical_insurance_code},
            </if>
            <if method="isNoEmpty" args="${GMP}">
                ${GMP},
            </if>
            <if method="isNoEmpty" args="${GMP_code}">
                ${GMP_code},
            </if>
            <if method="isNoEmpty" args="${storage_condition}">
                ${storage_condition},
            </if>
            <if method="isNoEmpty" args="${first}">
                ${first},
            </if>
            <if method="isNoEmpty" args="${sale_status}">
                ${sale_status},
            </if>
            <if method="isNoEmpty" args="${remarks}">
                ${remarks},
            </if>
            <if method="isNoEmpty" args="${storage_id}">
                ${storage_id},
            </if>

            now(),
            now(),
            )
        </sql>


        <sql id="insertCLSql" method="insert">
            insert into SAAS_TEST.saas_goods(

            <if method="isNoEmpty" args="${safe_inventory}">
                safe_inventory,
            </if>
            <if method="isNoEmpty" args="${code}">
                code,
            </if>
            <if method="isNoEmpty" args="${standard_library_id}">
                standard_library_id,
            </if>
            <if method="isNoEmpty" args="${name}">
                name,
            </if>
            <if method="isNoEmpty" args="${pinyin_code}">
                pinyin_code,
            </if>
            <if method="isNoEmpty" args="${generic_name}">
                generic_name,
            </if>
            <if method="isNoEmpty" args="${specification}">
                specification,
            </if>
            <if method="isNoEmpty" args="${place}">
                place,
            </if>
            <if method="isNoEmpty" args="${manufacturer}">
                manufacturer,
            </if>
            <if method="isNoEmpty" args="${preparation_id}">
                preparation_id,
            </if>
            <if method="isNoEmpty" args="${unit_id}">
                unit_id,
            </if>
            <if method="isNoEmpty" args="${toxicology}">
                toxicology,
            </if>
            <if method="isNoEmpty" args="${domestic_import}">
                domestic_import,
            </if>
            <if method="isNoEmpty" args="${registration_code}">
                registration_code,
            </if>
            <if method="isNoEmpty" args="${registration_code_expire_date}">
                registration_code_expire_date,
            </if>
            <if method="isNoEmpty" args="${barcode}">
                barcode,
            </if>
            <if method="isNoEmpty" args="${operating_license}">
                operating_license,
            </if>
            <if method="isNoEmpty" args="${enterprise_gmp_code}">
                enterprise_gmp_code,
            </if>
            <if method="isNoEmpty" args="${enterprise_gmp_expire_date}">
                enterprise_gmp_expire_date,
            </if>
            <if method="isNoEmpty" args="${drug_licence}">
                drug_licence,
            </if>
            <if method="isNoEmpty" args="${factory_report}">
                factory_report,
            </if>
            <if method="isNoEmpty" args="${valid_months}">
                valid_months,
            </if>
            <if method="isNoEmpty" args="${registered_trademark}">
                registered_trademark,
            </if>
            <if method="isNoEmpty" args="${certificated}">
                certificated,
            </if>
            <if method="isNoEmpty" args="${purchase_tax_rate}">
                purchase_tax_rate,
            </if>
            <if method="isNoEmpty" args="${sell_tax_rate}">
                sell_tax_rate,
            </if>
            <if method="isNoEmpty" args="${goods_type}">
                goods_type,
            </if>
            <if method="isNoEmpty" args="${category_id}">
                category_id,
            </if>
            <if method="isNoEmpty" args="${gsp_category_id}">
                gsp_category_id,
            </if>
            <if method="isNoEmpty" args="${retail_price}">
                retail_price,
            </if>
            <if method="isNoEmpty" args="${member_price}">
                member_price,
            </if>
            <if method="isNoEmpty" args="${mcountry_price}">
                mcountry_price,
            </if>
            <if method="isNoEmpty" args="${integral_good}">
                integral_good,
            </if>
            <if method="isNoEmpty" args="${special_price}">
                special_price,
            </if>
            <if method="isNoEmpty" args="${integral_multiple}">
                integral_multiple,
            </if>
            <if method="isNoEmpty" args="${scatter_unit_id}">
                scatter_unit_id,
            </if>
            <if method="isNoEmpty" args="${scattter_quantity}">
                scattter_quantity,
            </if>
            <if method="isNoEmpty" args="${scatter_specification}">
                scatter_specification,
            </if>
            <if method="isNoEmpty" args="${scattered}">
                scattered,
            </if>
            <if method="isNoEmpty" args="${curing}">
                curing,
            </if>
            <if method="isNoEmpty" args="${prescription_drug}">
                prescription_drug,
            </if>
            <if method="isNoEmpty" args="${ephedrine}">
                ephedrine,
            </if>
            <if method="isNoEmpty" args="${medical_insurance}">
                medical_insurance,
            </if>
            <if method="isNoEmpty" args="${medical_insurance_code}">
                medical_insurance_code,
            </if>
            <if method="isNoEmpty" args="${GMP}">
                GMP,
            </if>
            <if method="isNoEmpty" args="${GMP_code}">
                GMP_code,
            </if>
            <if method="isNoEmpty" args="${storage_condition}">
                storage_condition,
            </if>
            <if method="isNoEmpty" args="${first}">
                first,
            </if>
            <if method="isNoEmpty" args="${sale_status}">
                sale_status,
            </if>
            <if method="isNoEmpty" args="${remarks}">
                remarks,
            </if>
            <if method="isNoEmpty" args="${storage_id}">
                storage_id,
            </if>
            create_time,
            update_time,
            ) values(

            <if method="isNoEmpty" args="${safe_inventory}">
                ${safe_inventory},
            </if>
            <if method="isNoEmpty" args="${code}">
                ${code},
            </if>
            <if method="isNoEmpty" args="${standard_library_id}">
                ${standard_library_id},
            </if>
            <if method="isNoEmpty" args="${name}">
                ${name},
            </if>
            <if method="isNoEmpty" args="${pinyin_code}">
                ${pinyin_code},
            </if>
            <if method="isNoEmpty" args="${generic_name}">
                ${generic_name},
            </if>
            <if method="isNoEmpty" args="${specification}">
                ${specification},
            </if>
            <if method="isNoEmpty" args="${place}">
                ${place},
            </if>
            <if method="isNoEmpty" args="${manufacturer}">
                ${manufacturer},
            </if>
            <if method="isNoEmpty" args="${preparation_id}">
                ${preparation_id},
            </if>
            <if method="isNoEmpty" args="${unit_id}">
                ${unit_id},
            </if>
            <if method="isNoEmpty" args="${toxicology}">
                ${toxicology},
            </if>
            <if method="isNoEmpty" args="${domestic_import}">
                ${domestic_import},
            </if>
            <if method="isNoEmpty" args="${registration_code}">
                ${registration_code},
            </if>
            <if method="isNoEmpty" args="${registration_code_expire_date}">
                ${registration_code_expire_date},
            </if>
            <if method="isNoEmpty" args="${barcode}">
                ${barcode},
            </if>
            <if method="isNoEmpty" args="${operating_license}">
                ${operating_license},
            </if>
            <if method="isNoEmpty" args="${enterprise_gmp_code}">
                ${enterprise_gmp_code},
            </if>
            <if method="isNoEmpty" args="${enterprise_gmp_expire_date}">
                ${enterprise_gmp_expire_date},
            </if>
            <if method="isNoEmpty" args="${drug_licence}">
                ${drug_licence},
            </if>
            <if method="isNoEmpty" args="${factory_report}">
                ${factory_report},
            </if>
            <if method="isNoEmpty" args="${valid_months}">
                ${valid_months},
            </if>
            <if method="isNoEmpty" args="${registered_trademark}">
                ${registered_trademark},
            </if>
            <if method="isNoEmpty" args="${certificated}">
                ${certificated},
            </if>
            <if method="isNoEmpty" args="${purchase_tax_rate}">
                ${purchase_tax_rate},
            </if>
            <if method="isNoEmpty" args="${sell_tax_rate}">
                ${sell_tax_rate},
            </if>
            <if method="isNoEmpty" args="${goods_type}">
                ${goods_type},
            </if>
            <if method="isNoEmpty" args="${category_id}">
                ${category_id},
            </if>
            <if method="isNoEmpty" args="${gsp_category_id}">
                ${gsp_category_id},
            </if>
            <if method="isNoEmpty" args="${retail_price}">
                ${retail_price},
            </if>
            <if method="isNoEmpty" args="${member_price}">
                ${member_price},
            </if>
            <if method="isNoEmpty" args="${mcountry_price}">
                ${mcountry_price},
            </if>
            <if method="isNoEmpty" args="${integral_good}">
                ${integral_good},
            </if>
            <if method="isNoEmpty" args="${special_price}">
                ${special_price},
            </if>
            <if method="isNoEmpty" args="${integral_multiple}">
                ${integral_multiple},
            </if>
            <if method="isNoEmpty" args="${scatter_unit_id}">
                ${scatter_unit_id},
            </if>
            <if method="isNoEmpty" args="${scattter_quantity}">
                ${scattter_quantity},
            </if>
            <if method="isNoEmpty" args="${scatter_specification}">
                ${scatter_specification},
            </if>
            <if method="isNoEmpty" args="${scattered}">
                ${scattered},
            </if>
            <if method="isNoEmpty" args="${curing}">
                ${curing},
            </if>
            <if method="isNoEmpty" args="${prescription_drug}">
                ${prescription_drug},
            </if>
            <if method="isNoEmpty" args="${ephedrine}">
                ${ephedrine},
            </if>
            <if method="isNoEmpty" args="${medical_insurance}">
                ${medical_insurance},
            </if>
            <if method="isNoEmpty" args="${medical_insurance_code}">
                ${medical_insurance_code},
            </if>
            <if method="isNoEmpty" args="${GMP}">
                ${GMP},
            </if>
            <if method="isNoEmpty" args="${GMP_code}">
                ${GMP_code},
            </if>
            <if method="isNoEmpty" args="${storage_condition}">
                ${storage_condition},
            </if>
            <if method="isNoEmpty" args="${first}">
                ${first},
            </if>
            <if method="isNoEmpty" args="${sale_status}">
                ${sale_status},
            </if>
            <if method="isNoEmpty" args="${remarks}">
                ${remarks},
            </if>
            <if method="isNoEmpty" args="${storage_id}">
                ${storage_id},
            </if>
            now(),
            now(),
            )
        </sql>


        <sql id="updateSql" method="update">
            update SAAS_TEST.saas_goods set

            <if method="isNoEmpty" args="${safe_inventory}">
                safe_inventory=${safe_inventory},
            </if>
            <if method="isNoEmpty" args="${code}">
                code=${code},
            </if>
            <if method="isNoEmpty" args="${standard_library_id}">
                standard_library_id=${standard_library_id},
            </if>
            <if method="isNoEmpty" args="${NAME}">
                name=${NAME},
            </if>
            <if method="isNoEmpty" args="${pinyin_code}">
                pinyin_code=${pinyin_code},
            </if>
            <if method="isNoEmpty" args="${generic_name}">
                generic_name=${generic_name},
            </if>
            <if method="isNoEmpty" args="${specification}">
                specification=${specification},
            </if>
            <if method="isNoEmpty" args="${place}">
                place=${place},
            </if>
            <if method="isNoEmpty" args="${manufacturer}">
                manufacturer=${manufacturer},
            </if>
            <if method="isNoEmpty" args="${preparation_id}">
                preparation_id=${preparation_id},
            </if>
            <if method="isNoEmpty" args="${unit_id}">
                unit_id=${unit_id},
            </if>
            <if method="isNoEmpty" args="${toxicology}">
                toxicology=${toxicology},
            </if>
            <if method="isNoEmpty" args="${domestic_import}">
                domestic_import=${domestic_import},
            </if>
            <if method="isNoEmpty" args="${registration_code}">
                registration_code=${registration_code},
            </if>
            <if method="isNoEmpty" args="${registration_code_expire_date}">
                registration_code_expire_date=${registration_code_expire_date},
            </if>
            <if method="isNoEmpty" args="${barcode}">
                barcode=${barcode},
            </if>
            <if method="isNoEmpty" args="${operating_license}">
                operating_license=${operating_license},
            </if>
            <if method="isNoEmpty" args="${enterprise_gmp_code}">
                enterprise_gmp_code=${enterprise_gmp_code},
            </if>
            <if method="isNoEmpty" args="${enterprise_gmp_expire_date}">
                enterprise_gmp_expire_date=${enterprise_gmp_expire_date},
            </if>
            <if method="isNoEmpty" args="${drug_licence}">
                drug_licence=${drug_licence},
            </if>
            <if method="isNoEmpty" args="${factory_report}">
                factory_report=${factory_report},
            </if>
            <if method="isNoEmpty" args="${valid_months}">
                valid_months=${valid_months},
            </if>
            <if method="isNoEmpty" args="${registered_trademark}">
                registered_trademark=${registered_trademark},
            </if>
            <if method="isNoEmpty" args="${certificated}">
                certificated=${certificated},
            </if>
            <if method="isNoEmpty" args="${purchase_tax_rate}">
                purchase_tax_rate=${purchase_tax_rate},
            </if>
            <if method="isNoEmpty" args="${sell_tax_rate}">
                sell_tax_rate=${sell_tax_rate},
            </if>
            <if method="isNoEmpty" args="${goods_type}">
                goods_type=${goods_type},
            </if>
            <if method="isNoEmpty" args="${category_id}">
                category_id=${category_id},
            </if>
            <if method="isNoEmpty" args="${gsp_category_id}">
                gsp_category_id=${gsp_category_id},
            </if>
            <if method="isNoEmpty" args="${retail_price}">
                retail_price=${retail_price},
            </if>
            <if method="isNoEmpty" args="${member_price}">
                member_price=${member_price},
            </if>
            <if method="isNoEmpty" args="${mcountry_price}">
                mcountry_price=${mcountry_price},
            </if>
            <if method="isNoEmpty" args="${integral_good}">
                integral_good=${integral_good},
            </if>
            <if method="isNoEmpty" args="${special_price}">
                special_price=${special_price},
            </if>
            <if method="isNoEmpty" args="${integral_multiple}">
                integral_multiple=${integral_multiple},
            </if>
            <if method="isNoEmpty" args="${scatter_unit_id}">
                scatter_unit_id=${scatter_unit_id},
            </if>
            <if method="isNoEmpty" args="${scattter_quantity}">
                scattter_quantity=${scattter_quantity},
            </if>
            <if method="isNoEmpty" args="${scatter_specification}">
                scatter_specification=${scatter_specification},
            </if>
            <if method="isNoEmpty" args="${scattered}">
                scattered=${scattered},
            </if>
            <if method="isNoEmpty" args="${curing}">
                curing=${curing},
            </if>
            <if method="isNoEmpty" args="${prescription_drug}">
                prescription_drug=${prescription_drug},
            </if>
            <if method="isNoEmpty" args="${ephedrine}">
                ephedrine=${ephedrine},
            </if>
            <if method="isNoEmpty" args="${medical_insurance}">
                medical_insurance=${medical_insurance},
            </if>
            <if method="isNoEmpty" args="${medical_insurance_code}">
                medical_insurance_code=${medical_insurance_code},
            </if>
            <if method="isNoEmpty" args="${GMP}">
                GMP=${GMP},
            </if>
            <if method="isNoEmpty" args="${GMP_code}">
                GMP_code=${GMP_code},
            </if>
            <if method="isNoEmpty" args="${storage_condition}">
                storage_condition=${storage_condition},
            </if>
            <if method="isNoEmpty" args="${first}">
                first=${first},
            </if>
            <if method="isNoEmpty" args="${sale_status}">
                sale_status=${sale_status},
            </if>
            <if method="isNoEmpty" args="${remarks}">
                remarks=${remarks},
            </if>
            <if method="isNoEmpty" args="${attachment}">
                attachment=${attachment},
            </if>
            <if method="isNoEmpty" args="${storage_id}">
                storage_id=${storage_id},
            </if>
            update_time=now(),
            where id=${key}
        </sql>

        <sql id="updateAddrSql" method="update">
            update SAAS_TEST.saas_goods set

            <if method="isNoEmpty" args="${retail_price}">
                retail_price=${retail_price},
            </if>
            <if method="isNoEmpty" args="${member_price}">
                member_price=${member_price},
            </if>
            update_time=now(),
            where id=${key}
        </sql>

        <sql id="totalSql" method="select">
            select count(a.channels_id) channelsid
            from KKMY_CHANNELS a where 1=1
            <if method="isNoEmpty" args="${startTime}">
                <![CDATA[and a.create_time >= ${startTime}]]>
            </if>
            <if method="isNoEmpty" args="${endTime}">
                <![CDATA[ and a.create_time <= ${endTime}]]>
            </if>
            <if method="isNoEmpty" args="${channels_name}">
                <![CDATA[ and a.channels_name like %${channels_name}%]]>
            </if>
            <if method="isNoEmpty" args="${docking_people}">
                <![CDATA[ and a.channels_id =${docking_people}]]>
            </if>
        </sql>
        <sql id="deleteSql" method="delete">
            delete from SAAS_TEST.saas_goods where
            id= ${id}
        </sql>

        <sql id="disableSql" method="update">
            update SAAS_TEST.saas_goods set
            <if method="isNoEmpty" args="${disable_user_id}">
                disable_user_id=${disable_user_id},
            </if>
            <if method="isNoEmpty" args="${disable_user_name}">
                disable_user_name=${disable_user_name},
            </if>
            <if method="isNoEmpty" args="${disable_time}">
                disable_time=${disable_time},
            </if>
            <if method="isNoEmpty" args="${disable_reason}">
                disable_reason=${disable_reason},
            </if>
            sale_status=0,
            where id=${key}
        </sql>

        <sql id="enableSql" method="update">
            update SAAS_TEST.saas_goods set
            <if method="isNoEmpty" args="${enable_user_id}">
                enable_user_id=${enable_user_id},
            </if>
            <if method="isNoEmpty" args="${enable_user_name}">
                enable_user_name=${enable_user_name},
            </if>
            <if method="isNoEmpty" args="${disable_time}">
                enable_time=${enable_time},
            </if>
            <if method="isNoEmpty" args="${enable_reason}">
                enable_reason=${enable_reason},
            </if>
            sale_status=1,
            where id=${key}
        </sql>

        <sql id="checkNumSql" method="query">
            select
            CASE
            WHEN CONVERT(${member_price},SIGNED) > CONVERT(${retail_price},SIGNED) THEN
            'true'
            ELSE
            'false'
            END AS mustBreak
        </sql>


        <sql id="insertSerialNumberSql" method="execute">
            insert into saas_serial_number(type, date, num )
            select
            ${goods_type},
            <!-- 'goods_num', -->
            now(),
            IFNULL((select num FROM
            SAAS_TEST.saas_serial_number
            WHERE
            type = ${goods_type} order by num desc LIMIT 0,1),0)+1 as num;
        </sql>

        <sql id="selectSerialNumberSql" method="query">
            SELECT
            CASE WHEN ${goods_type}='0' THEN
            CONCAT('Y',LPAD(num,5,'0'))
            WHEN ${goods_type}='1' THEN
            CONCAT('Z',LPAD(num,5,'0'))
            WHEN ${goods_type}='2' THEN
            CONCAT('J',LPAD(num,5,'0'))
            WHEN ${goods_type}='3' THEN
            CONCAT('B',LPAD(num,5,'0'))
            WHEN ${goods_type}='4' THEN
            CONCAT('H',LPAD(num,5,'0'))
            WHEN ${goods_type}='5' THEN
            CONCAT('Q',LPAD(num,5,'0'))
            WHEN ${goods_type}='6' THEN
            CONCAT('T',LPAD(num,5,'0'))
            END AS code
            FROM
            SAAS_TEST.saas_serial_number
            WHERE
            type =
            ${goods_type}
            order by num desc LIMIT 0,1;
        </sql>

        <sql id="insertSaasGoods" method="execute">
            INSERT INTO SAAS_TEST.saas_goods (
            code,
            name,
            standard_library_id,
            pinyin_code,
            generic_name,
            specification,
            place,manufacturer,
            preparation_id,
            unit_id,
            toxicology,
            domestic_import,
            registration_code,
            registration_code_expire_date,
            barcode,operating_license,
            enterprise_gmp_code,
            enterprise_gmp_expire_date,
            drug_licence,factory_report,
            valid_months,
            registered_trademark,
            certificated,
            purchase_tax_rate,
            sell_tax_rate,
            goods_type,
            category_id,
            gsp_category_id,
            retail_price,
            member_price,
            mcountry_price,
            integral_good,
            special_price,
            integral_multiple,
            <if method="isNoEmpty" args="${scatter_unit_id}">
                scatter_unit_id,
            </if>
            <if method="isNoEmpty" args="${scattter_quantity}">
                scattter_quantity,
            </if>
            <if method="isNoEmpty" args="${scatter_specification}">
                scatter_specification,
            </if>
            scattered,
            curing,
            prescription_drug,
            ephedrine,
            medical_insurance,
            medical_insurance_code,
            GMP,
            GMP_code,
            storage_condition,
            first,
            quality_manager_approver_id,
            quality_manager_approver_name,
            quality_manager_approval_status,
            quality_manager_approval_time,
            quality_manager_approval_reason,
            quality_approver_id,
            quality_approver_name,
            quality_approval_time,
            quality_approval_reason,
            creater_id,creater_name,
            modifier_id,
            modifier_name,
            sale_status,
            enable_user_id,
            enable_user_name,
            disable_user_id,
            disable_user_name,
            department,
            enable_reason,
            disable_reason,
            enable_time,
            disable_time,
            create_time,
            update_time,
            remarks,
            storage_id,
            attachment
            ) SELECT
            CONCAT(${code}, '_01'),
            name,
            standard_library_id,
            pinyin_code,
            generic_name,
            specification,
            place,
            manufacturer,
            preparation_id,
            unit_id,
            toxicology,
            domestic_import,
            registration_code,
            registration_code_expire_date,
            barcode,operating_license,
            enterprise_gmp_code,
            enterprise_gmp_expire_date,
            drug_licence,factory_report,
            valid_months,
            registered_trademark,
            certificated,
            purchase_tax_rate,
            sell_tax_rate,
            goods_type,
            category_id,
            gsp_category_id,
            <!-- retail_price, -->
            retail_price/scattter_quantity,
            <!-- member_price, -->
            member_price/scattter_quantity,
            mcountry_price,
            integral_good,
            special_price,
            integral_multiple,
            <if method="isNoEmpty" args="${scatter_unit_id}">
                ${scatter_unit_id},
            </if>
            <if method="isNoEmpty" args="${scattter_quantity}">
                ${scattter_quantity},
            </if>
            <if method="isNoEmpty" args="${scatter_specification}">
                ${scatter_specification},
            </if>
            ${scattered},
            curing,
            prescription_drug,
            ephedrine,
            medical_insurance,
            medical_insurance_code,
            GMP,
            GMP_code,
            storage_condition,
            first,
            quality_manager_approver_id,
            quality_manager_approver_name,
            quality_manager_approval_status,
            quality_manager_approval_time,
            quality_manager_approval_reason,
            quality_approver_id,
            quality_approver_name,
            quality_approval_time,
            quality_approval_reason,
            creater_id,creater_name,
            modifier_id,
            modifier_name,
            sale_status,
            enable_user_id,
            enable_user_name,
            disable_user_id,
            disable_user_name,
            department,
            enable_reason,
            disable_reason,
            enable_time,
            disable_time,
            create_time,
            update_time,
            remarks,
            storage_id,
            attachment
            FROM
            SAAS_TEST.saas_goods
            WHERE
            code = ${code} and scattered='1' and (select count(*) from
            SAAS_TEST.saas_goods where code = CONCAT(${code}, '_01')) = 0
        </sql>

    </sqls>

    <!-- 查询节点，配包括查询请求的执行流程、页面渲染方式、查询条件配置等几个部分 -->
    <query pagesize="50">
        <!-- 执行流程，包含多个步骤，每个步骤可以选择调用service、执行sql，调用http等不同类型的操作 -->
        <process>
            <step channel="sql" ref="listsql"/>
            <step channel="service" ref="commonSearchService2" method="test"/>
        </process>
        <model>
            <clumn name="code" sortable="false" title="编码"/>
            <clumn name="NAME" sortable="false" title="名称"/>
            <clumn name="unit_name" sortable="false" title="单位"/>
            <clumn name="specification" sortable="false" title="规格"/>
            <clumn name="preparation_name" sortable="false" title="剂型"/>
            <clumn name="manufacturer" sortable="false" title="生产企业"/>
            <clumn name="FIRST_name" sortable="false" title="首营"/>
            <clumn name="sale_status_name" sortable="false" title="销售状态"/>
            <clumn name="create_time" sortable="true" title="创建时间"/>
            <!-- <clumn name="scatter_unit_id" sortable="false" title="拆零单位" /> -->

        </model>
        <conditions>
            <condition input="text" title="药品名称" name="name"/>
            <condition input="text" title="拼音码" name="pinyin_code"/>
            <condition input="text" title="商品编码" name="code"/>
            <condition input="text" title="批准文号" name="registration_code"/>
            <condition input="select" title="销售状态" name="sale_status">
                <option id="" text="全部"/>
                <option id="1" text="启用"/>
                <option id="0" text="停用"/>
            </condition>
            <condition input="date" title="创建时间" name="startTime" type="3"/>
            <condition input="date" title="至" name="endTime" type="3"/>
        </conditions>
    </query>


    <operate>
        <button id="test1" title="查看" icon="icon-remove" channel="query" width="1200">
            <queryProcess>
                <step channel="sql" ref="ckSql"/>
            </queryProcess>
            <key>id</key>
            <table>SAAS_TEST.saas_goods</table>
            <conditions>
                <condition startArea="基础信息" name="goods_type_name" input="text" size="20" title="商品种类" readonly="true"/>
                <condition name="category_name" input="select" size="20" title="药品分类" readonly="true"/>
                <condition name="pinyin_code" input="text" size="20" title="拼音码" readonly="true"/>
                <condition name="standard_library_id" input="text" size="20" title="标准库ID" readonly="true"/>
                <condition name="NAME" input="text" size="20" title="名称" readonly="true"/>
                <condition name="generic_name" input="text" size="20" title="通用名称" readonly="true"/>
                <condition name="preparation_name" input="text" size="20" title="剂型" readonly="true"/>
                <condition name="barcode" input="text" size="20" title="条形码" readonly="true"/>
                <condition name="specification" input="text" size="20" title="规格" required="true" readonly="true"/>
                <condition name="unit_name" input="text" size="20" title="单位" readonly="true"/>
                <!-- <condition name="CODE" input="text" size="50" title="编码" readonly="true" /> -->
                <condition name="packing_specification" input="text" size="20" title="包装规格" readonly="true"/>
                <condition name="packing_unit_id" input="text" size="20" title="包装单位" readonly="true"/>
                <condition name="manufacturer" input="text" size="20" title="生产企业" readonly="true"/>
                <condition name="place" input="text" size="20" title="产地" readonly="true"/>
                <condition name="registration_code" input="text" size="50" title="批准文号" readonly="true"/>
                <condition name="registration_code_expire_date" input="date" title="批准文号期限" readonly="true"/>
                <condition name="toxicology_name" input="text" size="20" title="毒理" readonly="true"/>
                <condition name="domestic_import_name" input="text" size="20" title="国产/进口" readonly="true"/>
                <condition endArea="基础信息" name="valid_months" input="text" size="20" title="有效月数" required="true"
                           readonly="true"/>

                <condition startArea="销售设置" name="retail_price" input="text" size="20" title="零售价" readonly="true"/>
                <condition name="member_price" input="text" size="20" title="会员价" readonly="true"/>
                <condition name="mcountry_price" input="text" size="20" title="国零价" readonly="true"/>
                <condition name="safe_inventory" input="text" size="20" validate="number" title="安全库存" readonly="true"/>
                <condition name="integral_good_name" input="text" size="20" title="积分商品" readonly="true"/>
                <condition name="integral_multiple" input="text" size="20" title="积分倍数" readonly="true"/>
                <condition name="special_price_name" input="text" size="20" title="特价商品" readonly="true"/>
                <condition name="storage_id_name" input="text" size="20" title="默认货位" readonly="true"/>
                <condition name="scattered_name" input="text" size="20" title="拆零" readonly="true"/>
                <condition name="scatter_unit_name" input="select" size="20" title="拆零单位" readonly="true"/>
                <condition name="scattter_quantity" input="text" size="20" title="拆零数量" readonly="true"/>
                <condition name="scatter_specification" input="text" size="20" title="拆零规格" readonly="true"/>
                <condition name="purchase_tax_rate" input="text" size="20" title="采购税率(%)" readonly="true"/>
                <condition endArea="销售设置" name="sell_tax_rate" input="text" size="20" title="销售税率(%)" readonly="true"/>

                <condition startArea="GSP设置" name="prescription_drug_name" input="text" size="20" title="处方药"
                           readonly="true"/>
                <condition name="ephedrine_name" input="text" size="20" title="麻黄碱" readonly="true"/>
                <condition name="curing_name" input="text" size="20" title="重点养护" readonly="true"/>
                <condition name="storage_condition_name" input="text" size="20" title="储存条件" readonly="true"/>
                <condition name="medical_insurance_name" input="select" size="20" title="医保药品" readonly="true"/>
                <condition endArea="GSP管理" name="medical_insurance_code" input="text" size="20" title="医保号"
                           readonly="true"/>

                <condition startArea="其他" name="sale_status_name" input="text" size="20" title="药品状态" readonly="true"/>
                <condition endArea="其他" name="FIRST_name" input="text" size="20" title="首营" readonly="true"/>
                <!-- <condition  name="remarks_name" input="textarea" hiddenid="remarks" size="20" title="添加附件 " readonly="true" /> -->
            </conditions>
        </button>

        <button id="test2" title="修改" icon="icon-edit" channel="select_query_execute" width="1200">
            <preprocess>
                <step channel="service" ref="commonSearchService2" method="test"/>
            </preprocess>
            <process>
                <step channel="service" ref="saasSupplierService" method="modiReviewedData"/>
                <!-- <step channel="sql" ref="insertSerialNumberSql" /> -->
                <!-- <step channel="sql" ref="selectSerialNumberSql" /> -->
                <step channel="sql" ref="updateSql"/>
                <step channel="sql" ref="insertSaasGoods"/>
            </process>
            <queryProcess>
                <step channel="service" ref="commonSearchService2" method="test"/>
                <step channel="sql" ref="querySql"/>
                <step channel="service" ref="commonSearchService2" method="test"/>
            </queryProcess>
            <key>id</key>
            <table>SAAS_TEST.saas_goods</table>
            <conditions>
                <condition startArea="基础信息" name="goods_type_name" input="text" size="20" required="true" title="商品种类"
                           readonly="true"/>
                <!-- <sql>
                    select a.value id,a.name text
                    from SAAS_TEST.saas_dictionary a where a.category = 'goods_type'
                </sql>
            </condition> -->
                <condition name="category_id" input="select" size="20" title="药品分类">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'category_id'
                    </sql>
                </condition>
                <condition name="pinyin_code" input="text" size="20" title="拼音码" readonly="true"/>
                <condition name="standard_library_id" hiddenid="code" input="text" size="20" title="标准库ID"
                           readonly="true"/>
                <condition name="NAME" input="text" size="20" title="名称" required="true">
                    <event mode="change" popuplinkage="888888" width="1000" passvalue="false"/>
                    <event mode="dbclick" hiddenid="id" popuplinkage="222222" popuptitle="从标准库检索" width="1000"
                           passvalue="true"/>
                </condition>
                <condition name="generic_name" input="text" size="20" title="通用名称"/>
                <condition name="preparation_id" input="select" size="20" title="剂型">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'preparation_id'
                    </sql>
                </condition>
                <condition name="barcode" input="text" size="20" title="条形码"/>
                <condition name="specification" input="text" size="20" title="规格" required="true"/>
                <condition name="unit_id" input="select" size="20" title="单位">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'unit_id'
                    </sql>
                </condition>

                <condition name="packing_specification" input="text" size="20" title="包装规格"/>
                <condition name="packing_unit_id" input="select" size="20" title="包装单位">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'unit_id'
                    </sql>
                </condition>
                <condition name="manufacturer" input="text" size="20" title="生产企业" required="true"/>
                <condition name="place" input="text" size="20" title="产地"/>
                <condition name="registration_code" input="text" size="50" title="批准文号" required="true"/>
                <condition name="registration_code_expire_date" input="date" title="批准文号期限"/>

                <condition name="toxicology" input="select" size="20" title="毒理">
                    <option id="0" text="无毒"/>
                    <option id="1" text="有毒"/>
                </condition>
                <condition name="domestic_import" input="select" size="20" title="国产/进口">
                    <option id="0" text="国产"/>
                    <option id="1" text="进口"/>
                </condition>
                <condition endArea="基础信息" name="valid_months" input="select" defaultvalue="24" size="20" title="有效月数"
                           required="true">
                    <option id="12" text="12"/>
                    <option id="24" text="24"/>
                    <option id="36" text="36"/>
                    <option id="48" text="48"/>
                    <option id="60" text="60"/>
                </condition>
                <condition startArea="销售设置" name="retail_price" input="text" size="20" validate="number" title="零售价"
                           required="true"/>
                <condition name="member_price" input="text" size="20" validate="number" title="会员价" required="true"/>
                <condition name="mcountry_price" input="text" size="20" validate="number" title="国零价"/>
                <condition name="safe_inventory" input="text" size="20" validate="number" title="安全库存" required="true"/>
                <condition name="integral_good" input="radio" size="20" title="积分商品">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'has_seal'
                    </sql>
                </condition>
                <condition name="integral_multiple" input="text" validate="number" size="20" title="积分倍数"/>
                <condition name="special_price" input="radio" size="20" title="特价商品">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'has_seal'
                    </sql>
                </condition>
                <condition name="storage_id_name" readonly="true" input="text" size="20" title="默认货位" linkage="true"/>
                <!-- <sql>
                    SELECT
                    id as id,
                    name as text
                    FROM
                    SAAS_TEST.saas_storage
                    where id != -1 and storage_type = ${value}
                </sql>
            </condition> -->
                <condition name="scattered" input="radio" size="20" title="是否拆零">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'has_seal'
                    </sql>
                </condition>
                <condition name="scatter_unit_id" input="select" size="20" title="拆零单位">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'unit_id'
                    </sql>
                </condition>
                <condition name="scattter_quantity" input="text" validate="number" size="20" title="拆零数量"/>
                <condition name="scatter_specification" input="text" size="20" title="拆零规格"/>
                <condition name="purchase_tax_rate" input="text" size="20" validate="number" title="采购税率(%)"/>
                <condition endArea="销售设置" name="sell_tax_rate" input="text" size="20" validate="number"
                           title="销售税率(%)"/>

                <condition startArea="GSP设置" name="prescription_drug" input="radio" size="20" title="处方药">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'has_seal'
                    </sql>
                </condition>
                <condition name="ephedrine" input="radio" size="20" title="麻黄碱">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'has_seal'
                    </sql>
                </condition>
                <condition name="curing" input="radio" size="20" title="重点养护">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'has_seal'
                    </sql>
                </condition>

                <condition name="storage_condition" input="select" size="20" title="储存条件">
                    <option id="0" text="常温"/>
                    <option id="1" text="阴凉"/>
                    <option id="2" text="冷藏"/>
                </condition>
                <condition name="medical_insurance" input="radio" size="20" title="医保药品">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'has_seal'
                    </sql>
                </condition>
                <condition endArea="GSP设置" name="medical_insurance_code" input="text" size="20" title="医保号"/>

                <condition startArea="其他" name="sale_status" input="radio" size="20" title="药品状态">
                    <option id="0" text="禁用"/>
                    <option id="1" text="启用"/>
                </condition>
                <condition endArea="其他" name="first" input="radio" size="20" title="首营" defaultvalue="1">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'has_seal'
                    </sql>
                </condition>
                <!-- <condition  name="fujian" input="text" size="20" title="添加附件" /> -->
            </conditions>
        </button>

        <button id="test3" title="查看拆零" colNumber="3" icon="icon-remove" channel="select_query_execute" width="800"
                vcolumn="show_scattered">
            <queryProcess>
                <step channel="sql" ref="querySql"/>
                <step channel="sql" ref="ckclSql"/>
            </queryProcess>
            <process>
                <step channel="sql" ref="checkNumSql">
                    <breakMessage>零售价应该大于会员价</breakMessage>
                </step>
                <step channel="sql" ref="updateSql"/>
            </process>
            <preprocess>
                <step channel="sql" ref="checkSql">
                    <breakMessage>此为不可拆零商品</breakMessage>
                </step>
            </preprocess>
            <key>id</key>
            <table>SAAS_TEST.saas_goods</table>
            <conditions>
                <condition name="code" input="text" hiddenid="id" size="50" title="编码" readonly="true"/>
                <condition name="NAME" input="text" size="20" title="名称" readonly="true"/>
                <condition name="manufacturer" input="text" size="20" title="生产企业" readonly="true"/>
                <condition name="registration_code" input="text" size="50" title="批准文号" readonly="true"/>
                <condition name="preparation_id" input="select" size="20" title="剂型" readonly="true">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'preparation_id'
                    </sql>
                </condition>
                <condition name="scatter_unit_name" input="select" size="20" title="拆零单位" readonly="true"/>
                <condition name="scatter_specification" input="text" size="20" title="拆零规格" readonly="true"/>
                <!-- <condition name="mcountry_price" input="text" size="20" title="国零价" /> -->
                <condition name="retail_price" input="text" size="20" title="零售价" required="true"/>
                <condition name="member_price" input="text" size="20" title="会员价" required="true"/>

            </conditions>
        </button>
    </operate>

    <buttons>

        <button id="test1" title="新增药品" icon="icon-add" channel="query_execute" width="1200">
            <process>
                <step channel="service" ref="commonSearchService2" method="test"/>
                <step channel="sql" ref="checkNumSql">
                    <breakMessage>零售价应该大于会员价</breakMessage>
                </step>
                <step channel="sql" ref="insertSerialNumberSql"/>
                <step channel="sql" ref="selectSerialNumberSql"/>
                <step channel="sql" ref="insertSql"/>
                <step channel="sql" ref="insertSaasGoods"/>
            </process>
            <queryProcess>
                <step channel="service" ref="saasSupplierService" method="setStorageType"/>
            </queryProcess>
            <conditions>
                <condition startArea="基础信息" name="goods_type" input="select" size="20" required="true" title="商品种类"
                           popuplinkage="6999" popuptitle="类别选择" width="1000">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'goods_type'
                    </sql>
                </condition>
                <condition name="category_id" input="select" size="20" title="药品分类">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'category_id'
                    </sql>
                </condition>
                <condition name="pinyin_code" input="text" size="20" title="拼音码" readonly="true"/>
                <condition name="standard_library_id" input="text" size="20" title="标准库ID"/>
                <condition name="name" input="text" size="20" title="名称" required="true">
                    <event mode="change" popuplinkage="888888" width="1000" passvalue="false"/>
                    <event mode="dbclick" hiddenid="id" popuplinkage="222222" popuptitle="从标准库检索" width="1000"
                           passvalue="true"/>
                </condition>
                <condition name="generic_name" input="text" size="20" title="通用名称"/>
                <condition name="preparation_id" input="select" size="20" title="剂型">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'preparation_id'
                    </sql>
                </condition>
                <condition name="barcode" input="text" size="20" title="条形码"/>
                <condition name="specification" input="text" size="20" title="规格" required="true"/>
                <condition name="unit_id" input="select" size="20" title="单位">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'unit_id'
                    </sql>
                </condition>

                <condition name="packing_specification" input="text" size="20" title="包装规格"/>
                <condition name="packing_unit_id" input="select" size="20" title="包装单位">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'unit_id'
                    </sql>
                </condition>
                <condition name="manufacturer" input="text" size="20" title="生产企业" required="true"/>
                <condition name="place" input="text" size="20" title="产地"/>
                <condition name="registration_code" input="text" size="50" title="批准文号" required="true"/>
                <condition name="registration_code_expire_date" input="date" title="注册文号期限"/>

                <condition name="toxicology" input="select" size="20" title="毒理">
                    <option id="0" text="无毒"/>
                    <option id="1" text="有毒"/>
                </condition>
                <condition name="domestic_import" input="select" size="20" title="国产/进口">
                    <option id="0" text="国产"/>
                    <option id="1" text="进口"/>
                </condition>
                <condition endArea="基础信息" name="valid_months" input="select" defaultvalue="24" size="20" title="有效月数"
                           required="true">
                    <option id="12" text="12"/>
                    <option id="24" text="24"/>
                    <option id="36" text="36"/>
                    <option id="48" text="48"/>
                    <option id="60" text="60"/>
                </condition>
                <condition startArea="销售设置" name="retail_price" input="text" size="20" validate="number" title="零售价"
                           required="true"/>
                <condition name="member_price" input="text" size="20" defaultvalue="0" validate="number" title="会员价"
                           required="true"/>
                <condition name="mcountry_price" input="text" size="20" validate="number" title="国零价"/>
                <condition name="safe_inventory" input="text" size="20" validate="number" title="安全库存" required="true"/>
                <condition name="integral_good" input="radio" defaultvalue="1" size="20" title="积分商品">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'has_seal'
                    </sql>
                </condition>
                <condition name="integral_multiple" input="text" defaultvalue="0" validate="number" size="20"
                           title="积分倍数"/>
                <condition name="special_price" input="radio" defaultvalue="0" size="20" title="特价商品">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'has_seal'
                    </sql>
                </condition>
                <condition name="storage_id" hiddenid="storage_name" input="select" size="20" title="默认货位"
                           linkage="true">
                    <sql>
                        SELECT
                        id as id,
                        name as text
                        FROM
                        SAAS_TEST.saas_storage
                        where id != -1 and storage_type = ${value}
                    </sql>
                </condition>
                <condition name="scattered" input="radio" size="20" defaultvalue="0" title="是否拆零">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'has_seal'
                    </sql>
                </condition>
                <condition name="scatter_unit_id" input="select" size="20" title="拆零单位">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'unit_id'
                    </sql>
                </condition>
                <condition name="scattter_quantity" input="text" validate="number" size="20" title="拆零数量"/>
                <condition name="scatter_specification" input="text" size="20" title="拆零规格"/>
                <condition name="purchase_tax_rate" input="text" defaultvalue="0" size="20" validate="number"
                           title="采购税率(%)"/>
                <condition endArea="销售设置" name="sell_tax_rate" defaultvalue="0" input="text" size="20" validate="number"
                           title="销售税率(%)"/>

                <condition startArea="GSP设置" name="prescription_drug" defaultvalue="0" input="radio" size="20"
                           title="处方药">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'has_seal'
                    </sql>
                </condition>
                <condition name="ephedrine" input="radio" defaultvalue="0" size="20" title="麻黄碱">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'has_seal'
                    </sql>
                </condition>
                <condition name="curing" input="radio" size="20" defaultvalue="0" title="重点养护">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'has_seal'
                    </sql>
                </condition>

                <condition name="storage_condition" defaultvalue="0" input="select" size="20" title="储存条件">
                    <option id="0" text="常温"/>
                    <option id="1" text="阴凉"/>
                    <option id="2" text="冷藏"/>
                </condition>
                <condition name="medical_insurance" defaultvalue="0" input="radio" size="20" title="医保药品">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'has_seal'
                    </sql>
                </condition>
                <condition endArea="GSP设置" name="medical_insurance_code" input="text" size="20" title="医保号"/>

                <condition startArea="其他" defaultvalue="1" name="sale_status" input="radio" size="20" title="药品状态">
                    <option id="0" text="禁用"/>
                    <option id="1" text="启用"/>
                </condition>
                <condition endArea="其他" name="first" input="radio" size="20" title="首营" defaultvalue="1">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'has_seal'
                    </sql>
                </condition>
                <!-- <condition  name="fujian" input="text" size="20" title="添加附件" /> -->
            </conditions>
        </button>

        <button id="test2" title="停用药品" icon="icon-cancel" channel="select_query_execute" width="1000" height="200">
            <process>
                <step channel="service" ref="saasGoodsService" method="setReviewedBusData1"/>
                <step channel="sql" ref="disableSql"/>
                <step channel="service" ref="commonSearchService2" method="test"/>
            </process>
            <queryProcess>
                <step channel="service" ref="commonSearchService2" method="test"/>
                <step channel="sql" ref="querySql"/>
                <step channel="service" ref="saasGoodsService" method="setBusPageData1"/>
            </queryProcess>
            <preprocess>
                <step channel="sql" ref="checkSSSql">
                    <breakMessage>此商品已停用</breakMessage>
                </step>
            </preprocess>
            <key>id</key>
            <table>SAAS_TEST.saas_goods</table>
            <conditions>
                <condition name="disable_user_id" input="text" title="停用人ID" readonly="true"/>
                <condition name="disable_user_name" input="text" title="停用人" readonly="true"/>
                <condition name="disable_time" input="date" size="10" title="停用时间"
                           defaultprocess="saasSupplierService.setDate"/>
                <condition name="disable_reason_name" input="textarea" hiddenid="disable_reason" size="11"
                           title="停用原因"/>
            </conditions>
        </button>

        <button id="test3" title="启用药品" icon="icon-ok" channel="select_query_execute" width="1000" height="200">

            <process>
                <step channel="service" ref="saasGoodsService" method="setReviewedBusData1"/>
                <step channel="sql" ref="enableSql"/>
                <step channel="service" ref="commonSearchService2" method="test"/>
            </process>
            <queryProcess>
                <step channel="service" ref="commonSearchService2" method="test"/>
                <step channel="sql" ref="querySql"/>
                <!-- <step channel="sql" ref="ckSql" /> -->
                <step channel="service" ref="saasGoodsService" method="setBusPageData1"/>
            </queryProcess>

            <preprocess>
                <step channel="sql" ref="checkSSql">
                    <breakMessage>此商品已启用</breakMessage>
                </step>
            </preprocess>
            <key>id</key>
            <table>SAAS_TEST.saas_goods</table>
            <conditions>
                <condition name="enable_user_id" input="text" title="启用人ID" readonly="true"/>
                <condition name="enable_user_name" input="text" title="启用人" readonly="true"/>
                <condition name="enable_time" input="date" size="10" title="启用时间"
                           defaultprocess="saasSupplierService.setDate"/>
                <condition name="enable_reason_name" input="textarea" hiddenid="enable_reason" size="11" title="启用原因"/>
            </conditions>
        </button>

        <button id="testimport" title="导入数据" icon="icon-inboxDownload" channel="import" width="1100">
            <process>
                <step channel="service" ref="commonSearchService2" method="test"/>
                <step channel="sql" ref="checkNumSql">
                    <breakMessage>零售价应该大于会员价</breakMessage>
                </step>
                <step channel="sql" ref="insertSql"/>
                <step channel="service" ref="saasGoodsService" method="goodsCode"/>
            </process>
            <conditions>
                <condition startArea="基础信息" name="goods_type" input="select" size="20" required="true" title="商品种类"
                           popuplinkage="6999" popuptitle="类别选择" width="1000">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'goods_type'
                    </sql>
                </condition>
                <condition name="category_id" input="select" size="20" title="药品分类"/>
                <condition name="pinyin_code" input="text" size="20" title="拼音码" readonly="true"/>
                <condition name="standard_library_id" input="text" size="20" title="标准库ID"/>
                <condition name="name" input="text" size="20" title="名称" required="true">
                    <event mode="change" popuplinkage="888888" width="1000" passvalue="false"/>
                    <event mode="dbclick" hiddenid="id" popuplinkage="222222" popuptitle="从标准库检索" width="1000"
                           passvalue="true"/>
                </condition>
                <condition name="generic_name" input="text" size="20" title="通用名称"/>
                <condition name="preparation_id" input="select" size="20" title="剂型">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'preparation_id'
                    </sql>
                </condition>
                <condition name="barcode" input="text" size="20" title="条形码"/>
                <condition name="specification" input="text" size="20" title="规格" required="true"/>
                <condition name="unit_id" input="select" size="20" title="单位">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'unit_id'
                    </sql>
                </condition>

                <condition name="packing_specification" input="text" size="20" title="包装规格" required="true"/>
                <condition name="packing_unit_id" input="select" size="20" title="包装单位">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'unit_id'
                    </sql>
                </condition>
                <condition name="manufacturer" input="text" size="20" title="生产企业" required="true"/>
                <condition name="place" input="text" size="20" title="产地"/>
                <condition name="registration_code" input="text" size="50" title="批准文号" required="true"/>
                <condition name="registration_code_expire_date" input="date" title="注册文号期限"/>

                <condition name="toxicology" input="select" size="20" title="毒理">
                    <option id="0" text="无毒"/>
                    <option id="1" text="有毒"/>
                </condition>
                <condition name="domestic_import" input="select" size="20" title="国产/进口">
                    <option id="0" text="国产"/>
                    <option id="1" text="进口"/>
                </condition>
                <condition endArea="基础信息" name="valid_months" input="select" defaultvalue="24" size="20" title="有效月数"
                           required="true">
                    <option id="12" text="12"/>
                    <option id="24" text="24"/>
                    <option id="36" text="36"/>
                    <option id="48" text="48"/>
                    <option id="60" text="60"/>
                </condition>
                <condition startArea="销售设置" name="retail_price" input="text" size="20" validate="number" title="零售价"
                           required="true"/>
                <condition name="member_price" input="text" size="20" validate="number" title="会员价" required="true"/>
                <condition name="mcountry_price" input="text" size="20" validate="number" title="国零价"/>
                <condition name="safe_inventory" input="text" size="20" validate="number" title="安全库存" required="true"/>
                <condition name="integral_good" input="radio" size="20" title="积分商品">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'has_seal'
                    </sql>
                </condition>
                <condition name="integral_multiple" input="text" validate="number" size="20" title="积分倍数"/>
                <condition name="special_price" input="radio" size="20" title="特价商品">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'has_seal'
                    </sql>
                </condition>
                <condition name="storage_id" hiddenid="storage_name" input="select" size="20" title="默认货位"
                           linkage="true">
                    <sql>
                        SELECT
                        id as id,
                        name as text
                        FROM
                        SAAS_TEST.saas_storage
                        where id != -1 and storage_type = ${value}
                    </sql>
                </condition>
                <condition name="scattered" input="radio" size="20" title="是否拆零">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'has_seal'
                    </sql>
                </condition>
                <condition name="scatter_unit_id" input="select" size="20" title="拆零单位">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'unit_id'
                    </sql>
                </condition>
                <condition name="scattter_quantity" input="text" validate="number" size="20" title="拆零数量"/>
                <condition name="scatter_specification" input="text" size="20" title="拆零规格"/>
                <condition name="purchase_tax_rate" input="text" size="20" validate="number" title="采购税率(%)"/>
                <condition endArea="销售设置" name="sell_tax_rate" input="text" size="20" validate="number"
                           title="销售税率(%)"/>

                <condition startArea="GSP设置" name="prescription_drug" input="radio" size="20" title="处方药">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'has_seal'
                    </sql>
                </condition>
                <condition name="ephedrine" input="radio" size="20" title="麻黄碱">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'has_seal'
                    </sql>
                </condition>
                <condition name="curing" input="radio" size="20" title="重点养护">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'has_seal'
                    </sql>
                </condition>

                <condition name="storage_condition" input="select" size="20" title="储存条件">
                    <option id="0" text="常温"/>
                    <option id="1" text="阴凉"/>
                    <option id="2" text="冷藏"/>
                </condition>
                <condition name="medical_insurance" input="radio" size="20" title="医保药品">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'has_seal'
                    </sql>
                </condition>
                <condition endArea="GSP设置" name="medical_insurance_code" input="text" size="20" title="医保号"/>

                <condition startArea="其他" name="sale_status" input="radio" size="20" title="药品状态">
                    <option id="0" text="禁用"/>
                    <option id="1" text="启用"/>
                </condition>
                <condition endArea="其他" name="first" input="radio" size="20" title="首营" defaultvalue="1">
                    <sql>
                        select a.value id,a.name text
                        from SAAS_TEST.saas_dictionary a where a.category = 'has_seal'
                    </sql>
                </condition>
                <!--<condition  name="fujian" input="text" size="20" title="添加附件" />-->
            </conditions>
        </button>

    </buttons>

    <!-- 数据概况节点，用户在页面头部显示数据的总体信息，比如总金额、总数量等等 -->
    <total>
        <process>
            <step channel="service" ref="commonSearchService2" method="test"/>
            <step channel="sql" ref="totalSql"/>
            <step channel="service" ref="commonSearchService2" method="test"/>
        </process>
        <model>
            <column name="channelsid" title="渠道总数"/>
        </model>
    </total>

    <!-- 统计图节点，可以配置多个统计图，跟查询<query>节点关联 -->
    <charts>
        <chart input="Pie2D" labels="dat" title="红包个数饼图">
            <process>
                <step channel="service" ref="commonSearchService2" method="test"/>
                <step channel="sql" ref="totalSql"/>
                <step channel="service" ref="commonSearchService2" method="test"/>
            </process>
            <data name="rednum" title="实发个数"></data>
            <data name="backnum" title="退领个数"></data>
        </chart>
        <chart input="ColumnMulti2D" labels="dat" title="红包个数柱状图">
            <data name="rednum" title="实发个数"></data>
            <data name="backnum" title="退领个数"></data>
        </chart>
        <chart input="LineBasic2D" labels="dat" title="红包个数折线图">
            <data name="redNum" title="实发个数"></data>
            <data name="backNum" title="退领个数"></data>
        </chart>
    </charts>

</template>


